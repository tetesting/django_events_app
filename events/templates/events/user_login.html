{% extends 'events/layouts/base.html' %}

{% load widget_tweaks %}

{% block title %}Login{% endblock %}

{% block pagetitle %}<h1>Log in</h1>{% endblock %}

{% block content %}

{% if user_is_inactive %}
  <p class="errornote">The user account: <b>{{ username }}</b> is inactive</p>
{% endif %}

<div id="content-main">
<form action="/login/" method="post" role="form" id="login-form">{% csrf_token %}
  <div class="form-group">
    <label for="id_username" class="required">{{ form.username.label }}</label>
    {{ form.username|add_class:"form-control input-textfield" }}
    {% if not form.this_is_the_login_form.errors %}{{ form.username.errors }}{% endif %}
  </div>
  <div class="form-group">
    <label for="id_password" class="required">Password</label>
    {{ form.password|add_class:"form-control input-textfield" }}
    {% if not form.this_is_the_login_form.errors %}{{ form.password.errors }}{% endif %}
  </div>
  {% if login_error %}
  <p class="errornote">
  {% if error_type == 'not_found' %}
    There is no account linked to that username.
  {% else %}
    The password provided is incorrect.
  {% endif %}
  </p>
  {% endif %}
  <br/>
  <div class="submit-row">
    <label>&nbsp;</label><input type="submit" class="btn btn-default" value="Log in" />
  </div>
</form>
</div>
{% endblock content %}

{% block more_js %}
<script type="text/javascript">
  {% if form.username.value %}
    document.getElementById('id_password').focus();
  {% else %}
    document.getElementById('id_username').focus();  
  {% endif %}
</script>
{% endblock %}
